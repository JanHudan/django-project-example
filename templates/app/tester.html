{% extends 'app/base.html' %} {% load static %} {% block title %} Tester | Hardware Management {% endblock %}

<!-- CONTENT -->

{% block content %} {% csrf_token %}
<section>
	<div class="row justify-content-md-center mt-3">
		<div class="col-12 col-sm-12 col-md-12 col-lg-12">
			<table id="table" class="table table-striped table-hover" cellspacing="0" width="100%">
				<thead>
					<tr>
						<th>ID</th>
						<th>Name</th>
						<th>Email</th>
						<th>Phone Number</th>
					</tr>
				</thead>
			</table>
		</div>
	</div>
</section>
<section>{% include "app/modal.html" %}</section>
{% endblock %}

<!-- SCRIPTS -->

{% block script %}
<script type="text/javascript" language="javascript" src="{% static 'js/ajax.js' %}"></script>
<script>
	$(document).ready(function () {
		$.ajax({
			url: "{% url 'api:TesterAPI' %}",
			method: "GET",
			headers: { "X-CSRFToken": $("input[name=csrfmiddlewaretoken]").val() },
			contentType: "application/json; charset=UTF-8",
			dataType: "json",
			success: function (data) {
				$("#table").DataTable({
					responsive: true,
					data: data,
					columns: [{ data: "id" }, { data: "name" }, { data: "email" }, { data: "phone_number" }],
				});
			},
			error: function () {
				alert("ajax get error");
			},
		});
	});
</script>
{% endblock %}
