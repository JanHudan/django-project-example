{% extends 'app/base.html' %} {% load static %} {% block title %} Hardware | Hardware Management {% endblock %}

<!-- CONTENT -->

{% block content %} {% csrf_token %}
<section>
	<div class="row justify-content-md-center mt-3">
		<div class="col-12 col-sm-12 col-md-12 col-lg-12">
			<table id="table" class="table table-striped table-hover display" cellspacing="0" width="100%">
				<thead>
					<tr>
						<th>ID</th>
						<th>Project</th>
						<th>Name</th>
						<th>Status</th>
						<th>Assigned Tester</th>
						<th></th>
					</tr>
				</thead>
			</table>
		</div>
	</div>
</section>
<section>{% include "app/modal.html" %}</section>
{% endblock %}

<!-- SCRIPTS -->

{% block script %}
<script type="text/javascript" language="javascript" src="{% static 'js/ajax.js' %}"></script>
<script>
	$(document).ready(function () {
		$.ajax({
			url: "{% url 'api:HardwareAPI' %}",
			method: "GET",
			headers: { "X-CSRFToken": $("input[name=csrfmiddlewaretoken]").val() },
			contentType: "application/json; charset=UTF-8",
			dataType: "json",
			success: function (data) {
				console.log(data);
				$("#table").DataTable({
					responsive: true,
					data: data,
					columns: [
						{ data: "id" },
						{ data: "project" },
						{ data: "name" },
						{ data: "status" },
						{ data: "tester" },
						{
							data: "id",
							render: function (data, type, full, meta) {
								return '<a href="/hardware/' + data + '" class="btn btn-secondary btn-sm" type="button"><span>Edit</span></a>';
							},
						},
					],
				});
			},
			error: function () {
				alert("ajax get error");
			},
		});
	});
</script>
{% endblock %}
